*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Segoe UI',Tahoma,Verdana,sans-serif;
}

/* ================= BASE ================= */

body{
    background:#f1eae1;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
    color:#491100;
}

.container{
    max-width:1500px;
    width:100%;
    background:#fdf6e3;
    border-radius:12px;
    box-shadow:0 8px 30px rgba(0,0,0,.2);
    overflow:hidden;
}

/* ================= HEADER APP ================= */

.header{
    background:linear-gradient(135deg,#491100 0%,#3a0e00 100%);
    color:#f1eae1;
    position:relative;
    overflow:hidden;
    text-align:center;
}

.header-title{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:20px;
    margin-bottom:10px;
    position:relative;
    z-index:1;
}

.header-title h1{
    margin:0;
    line-height:1.1;
}

.logo-img{
    width:130px;
    height:200px;
    object-fit:contain;
    filter:drop-shadow(0 2px 4px rgba(0,0,0,.3));
    flex-shrink:0;
}

.header::before{
    content:'';
    position:absolute;
    top:-50%;
    left:-80%;
    width:200%;
    height:200%;
    background:radial-gradient(circle, rgba(249,226,181,.1) 0%, rgba(249,226,181,0) 70%);
    transform:rotate(30deg);
    pointer-events:none;
}

/* ================= LAYOUT ================= */

.content{
    display:grid;
    grid-template-columns:minmax(320px,1fr) minmax(420px,auto);
    gap:30px;
    padding:30px;
    align-items:start;
}

.form-section{
    background:#fef9ec;
    border-radius:10px;
    border:1px solid #3a0e00;
    padding:25px;
    min-width:0;
}

.preview-section{
    background:#ffffff;
    border-radius:10px;
    border:1px solid #3a0e00;
    padding:25px;
    min-width:0;
    overflow:auto; /* melhora em telas intermediárias */
}

/* ================= FORM ================= */

h2{
    margin:18px 0 10px;
    color:#491100;
}

label{
    font-weight:600;
    display:block;
    margin-bottom:6px;
}

input,
textarea{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #3a0e00;
    background:#ffffff;
    margin-bottom:10px;
    color:#491100;
}

input:focus,
textarea:focus{
    outline:none;
    border-color:#491100;
    box-shadow:0 0 0 2px rgba(73,17,0,.12);
}

textarea{
    resize:vertical;
    min-height:90px;
}

.grid-2{
    display:grid;
    grid-template-columns:1fr 1fr;
    gap:10px;
}

.btn-add,
.btn-gerar,
.btn-limpar{
    background:#491100;
    color:#fdecc9;
    border:none;
    border-radius:8px;
    padding:12px;
    cursor:pointer;
    font-weight:bold;
    width:100%;
    margin-top:10px;
    transition:transform .12s ease, opacity .12s ease;
}

.btn-add:hover,
.btn-gerar:hover,
.btn-limpar:hover{
    opacity:.95;
}

.btn-add:active,
.btn-gerar:active,
.btn-limpar:active{
    transform:scale(.99);
}

.controls{
    display:flex;
    gap:10px;
    margin-top:20px;
}

/* ================= RECEITA (A4 PADRÃO) ================= */

.receita-preview{
    position:relative;
    border:2px solid #491100;
    background:#ffffff;

    /* A4 real (96dpi) */
    width:794px;
    height:1123px;

    /* margem interna de documento */
    padding:60px 55px;

    display:flex;
    flex-direction:column;
    font-family:"Times New Roman", serif;

    margin:0 auto; /* centraliza no card de preview */
}

/* texto geral */
.receita-preview p{
    margin-bottom:6px;
    line-height:1.35;
}

/* ================= CABEÇALHO DA RECEITA ================= */

.receita-header{
    text-align:center;
    border-bottom:2px solid #491100;
    padding-bottom:10px;
    margin-bottom:6px;
}

/* ================= CORPO / RODAPÉ ================= */

.corpo-receita{
    display:flex;
    flex-direction:column;
    flex:1;
}

/* rodapé fixo no fim da página */
.rodape-receita{
    margin-top:auto;
    text-align:center;
    padding-top:16px;
    border-top:1px solid #491100;
}

/* área da assinatura/carimbo centralizada */
.assinatura-area{
    height:110px;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-bottom:8px;
    width:100%;
}

#preview-carimbo{
    width:100%;
    display:flex;
    align-items:center;
    justify-content:center;
}

.medico-nome{
    font-weight:bold;
    margin-bottom:4px;
}

.medico-crm{
    font-size:.95em;
}

/* ================= DADOS PACIENTE ================= */

.paciente-info{
    margin-top:4px;
    margin-bottom:14px;
}

.paciente-info p{
    margin-bottom:6px;
    line-height:1.35;
}

/* ================= MEDICAMENTOS ================= */

.medicamentos-list{
    flex:1;
    overflow-y:auto;

    /* controla tamanho dentro do A4 */
    max-height:360px;
    min-height:140px;

    padding-right:6px;
    margin-bottom:14px;
}

.medicamento-preview{
    border-left:3px solid #491100;
    padding-left:10px;
    margin-bottom:8px;
}

/* ================= OBSERVAÇÕES ================= */

.observacoes{
    margin-top:12px;
}

.observacoes p{
    max-height:120px;
    overflow-y:auto;
}

.texto-quebra{
    white-space:pre-wrap;
    word-wrap:break-word;
    overflow-wrap:break-word;
}

/* ================= CARIMBO (UPLOAD - CARD ESQUERDO) ================= */

.carimbo-section{
    margin-top:15px;
}

.carimbo-preview{
    height:100px;
    border:2px dashed #491100;
    border-radius:8px;
    background:#fdf6e3;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
}

.carimbo-preview img{
    max-height:90px;
    max-width:100%;
    object-fit:contain;
}

.carimbo-controls{
    display:flex;
    gap:12px;
    margin-top:12px;
    flex-wrap:wrap;
}

.carimbo-controls button{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;

    padding:8px 14px;
    border-radius:6px;
    border:1px solid #491100;

    background:#ffffff;
    color:#491100;

    font-size:.85rem;
    font-weight:600;

    cursor:pointer;
    transition:all .2s ease;
}

.carimbo-controls button i{
    font-size:.9rem;
}

.carimbo-controls button:hover{
    background:#491100;
    color:#fdecc9;
}

.carimbo-controls button:active{
    transform:scale(.97);
}

/* ================= CARIMBO (APLICADO NA RECEITA) ================= */

.carimbo-final{
    position:static;         /* centralização controlada pelo flex da assinatura-area */
    display:block;
    max-width:180px;
    max-height:90px;
    width:auto;
    height:auto;
    opacity:.9;
    pointer-events:none;
    object-fit:contain;
}

/* ================= RESPONSIVO / SENSIBILIDADE ================= */

/* telas menores, mas ainda com espaço para duas colunas */
@media (max-width:1200px){
    .content{
        grid-template-columns:1fr;
    }

    .preview-section{
        overflow-x:auto;
    }

    .receita-preview{
        margin:0 auto;
    }
}

/* tablets */
@media (max-width:900px){
    body{
        padding:12px;
        align-items:flex-start;
    }

    .container{
        border-radius:10px;
    }

    .content{
        gap:18px;
        padding:16px;
    }

    .form-section,
    .preview-section{
        padding:16px;
    }

    .header{
        padding:10px 14px;
    }

    .header-title{
        gap:12px;
        margin-bottom:6px;
    }

    .header-title h1{
        font-size:1.2rem;
    }

    .logo-img{
        width:110px;
        height:110px;
    }

    .grid-2{
        grid-template-columns:1fr;
    }

    .controls{
        flex-direction:column;
    }

    /* Mantém padrão visual da folha sem "afinar":
       usa escala em vez de alterar largura original */
    .preview-section{
        display:flex;
        justify-content:center;
        overflow:auto;
    }

    .receita-preview{
        width:794px;
        height:1123px;
        min-height:1123px;
        transform-origin:top center;
        transform:scale(.82);
        margin-bottom:-200px; /* compensa altura visual após scale */
    }
}

/* celulares */
@media (max-width:768px){
    .receita-preview{
        transform:scale(.68);
        margin-bottom:-350px;
    }

    .logo-img{
        width:84px;
        height:84px;
    }

    .header-title{
        gap:10px;
    }

    .header-title h1{
        font-size:1rem;
    }

    .carimbo-controls button{
        width:100%;
    }
}

/* celulares menores */
@media (max-width:540px){
    body{
        padding:8px;
    }

    .content{
        padding:10px;
        gap:12px;
    }

    .form-section,
    .preview-section{
        padding:12px;
    }

    .receita-preview{
        transform:scale(.54);
        margin-bottom:-470px;
    }

    input,
    textarea{
        padding:9px;
    }

    .btn-add,
    .btn-gerar,
    .btn-limpar{
        padding:11px;
    }
}